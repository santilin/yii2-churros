Repensar el ActivatableInput
El bot√≥n borrar del grid de bs3 no sale rojo ni el del bs4.
Checkboxes: unchecked: no se ven.

== emailsend
Yii2Logger, [23.02.23 18:06]
‚ò†Ô∏è https://trivel.org/productora/unir

yii\base\UnknownMethodException: Calling unknown method: yii\swiftmailer\Mailer::saveMessage() in /var/www/yii2-dev/vendor/yiisoft/yii2/base/Component.php:300
Stack trace:
#0 /var/www/yii2-dev/vendor/santilin/yii2-churros/src/components/EmailSenderModelTrait.php(26): yii\base\Component->__call()
#1 [internal function]: app\models\Productora->santilin\churros\components\{closure}()
#2 /var/www/yii2-dev/vendor/yiisoft/yii2/base/Component.php(633): call_user_func()
#3 /var/www/yii2-dev/vendor/yiisoft/yii2/mail/BaseMailer.php(397): yii\base\Component->trigger()
#4 /var/www/yii2-dev/vendor/yiisoft/yii2/mail/BaseMailer.php(265): yii\mail\BaseMailer->afterSend()
#5 /var/www/yii2-dev/vendor/yiisoft/yii2/mail/BaseMessage.php(49): yii\mail\BaseMailer->send()
#6 /var/www/yii2-dev/vendor/santilin/yii2-churros/src/components/EmailSenderModelTrait.php(44): yii\mail\BaseMessage->send()
#7 /var/www/vhosts/trivel.org/httpdocs/models/Productora.php(52): app\models\Productora->sendModelEmail()
#8 /var/www/vhosts/trivel.org/httpdocs/models/Productora.php(480): app\models\Productora->composeAndSendEmail()
#9 /var/www/vhosts/trivel.org/httpdocs/controllers/ProductoraController.php(198): app\models\Productora->unir()
#10 [internal function]: app\controllers\ProductoraController->actionUnir()
#11 /var/www/yii2-dev/vendor/yiisoft/yii2/base/InlineAction.php(57): call_user_func_array()
#12 /var/www/yii2-dev/vendor/yiisoft/yii2/base/Controller.php(178): yii\base\InlineAction->runWithParams()
#13 /var/www/yii2-dev/vendor/yiisoft/yii2/base/Module.php(552): yii\base\Controller->runAction()
#14 /var/www/yii2-dev/vendor/yiisoft/yii2/web/Application.php(103): yii\base\Module->runAction()
#15 /var/www/yii2-dev/vendor/yiisoft/yii2/base/Application.php(384): yii\web\Application->handleRequest()
#16 /var/www/vhosts/trivel.org/httpdocs/web/index.php(17): yii\base\Application->run()
#17 {main}


üìñ yii\base\UnknownMethodException
üôÇ 77.231.188.26

Yii2Logger, [23.02.23 18:06]
‚ÑπÔ∏è https://trivel.org/productora/unir

$_GET = []

$_POST = [
    '_csrf' => 'UW4i5QDTQ8PWS5guvU5Ym2V27LQ484LS4t9VgviQq3YLGW6oOacCloMfyFnSOgH5ADza-1ajsqWR8jjyvd3mRg=='
    '_form_relations' => 'categoriaProductosProductoras,productorasTerritorios'
    'Productora_unir_Form' => [
        'id' => ''
        'nombre' => 'santilon'
        'email' => 'franciscocapel@cepaim2.org'
        'url' => 'https://www.hola.es'
        'categoriaProductosProductoras' => [
            0 => '2'
        ]
        'productorasTerritorios' => [
            0 => '3563'
        ]
        'presentacion' => 'dsfasfdasf'
    ]
    '_form_referrer' => 'https://trivel.org/'
    '_form_cancelUrl' => 'https://trivel.org/'
    'create' => ''
]

$_FILES = []

$_COOKIE = [
    'PHPSESSID' => 'poji7neojquuc55csvmcnmaugk'
    '_csrf' => 'ceae18a5afceb65165a8d7c03db9bfcea8857bf762ead075c4df249d7a5bedfba:2:{i:0;s:5:\"_csrf\";i:1;s:32:\"ZwLM9tAUUTPwotYbeJ6OnP0ws-mpEMM0\";}'
]

$_SESSION = [
    '__flash' => []
]

$_SERVER = [
    'USER' => 'trivel'
    'HOME' => '/var/www/vhosts/trivel.org'
    'SCRIPT_NAME' => '/index.php'
    'REQUEST_URI' => '/productora/unir'
    'QUERY_STRING' => ''
    'REQUEST_METHOD' => 'POST'
    'SERVER_PROTOCOL' => 'HTTP/1.0'
    'GATEWAY_INTERFACE' => 'CGI/1.1'
    'REDIRECT_URL' => '/productora/unir'
    'REMOTE_PORT' => '37714'
    'SCRIPT_FILENAME' => '/var/www/vhosts/trivel.org/httpdocs/web/index.php'
    'SERVER_ADMIN' => '[no address given]'
    'CONTEXT_DOCUMENT_ROOT' => '/var/www/vhosts/trivel.org/httpdocs/web'
    'CONTEXT_PREFIX' => ''
    'REQUEST_SCHEME' => 'https'
    'DOCUMENT_ROOT' => '/var/www/vhosts/trivel.org/httpdocs/web'
    'REMOTE_ADDR' => '77.231.188.26'
    'SERVER_PORT' => '443'
    'SERVER_ADDR' => '217.160.158.152'
    'SERVER_NAME' => 'trivel.org'
    'SERVER_SOFTWARE' => 'Apache'
    'SERVER_SIGNATURE' => '<address>Apache Server at trivel.org Port 443</address>
'
    'PATH' => '/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin'
    'HTTP_COOKIE' => 'PHPSESSID=poji7neojquuc55csvmcnmaugk; _csrf=ceae18a5afceb65165a8d7c03db9bfcea8857bf762ead075c4df249d7a5bedfba%3A2%3A%7Bi%3A0%3Bs%3A5%3A%22_csrf%22%3Bi%3A1%3Bs%3A32%3A%22ZwLM9tAUUTPwotYbeJ6OnP0ws-mpEMM0%22%3B%7D'
    'HTTP_SEC_FETCH_USER' => '?1'
    'HTTP_SEC_FETCH_SITE' => 'same-origin'
    'HTTP_SEC_FETCH_MODE' => 'navigate'
    'HTTP_SEC_FETCH_DEST' => 'document'
    'HTTP_UPGRADE_INSECURE_REQUESTS' => '1'
    'HTTP_REFERER' => 'https://trivel.org/productora/unir'
    'HTTP_ORIGIN' => 'https://trivel.org'
    'CONTENT_TYPE' => 'application/x-www-form-urlencoded'
    'HTTP_ACCEPT_ENCODING' => 'gzip, deflate, br'
    'HTTP_ACCEPT_LANGUAGE' => 'es-ES,es;q=0.8,en-US;q=0.5,en;q=0.3'
    'HTTP_ACCEPT' => 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,*/*;q=0.8'
    'HTTP_USER_AGENT' => 'Mozilla/5.0 (X11; Linux x86_64; rv:109.0) Gecko/20100101 Firefox/110.0'
    'CONTENT_LENGTH' => '734'
    'HTTP_CONNECTION' => 'close'
    'HTTP_X_ACCEL_INTERNAL' => '/internal-nginx-static-location'
    'HTTP_X_REAL_IP' => '77.231.188.26'
    'HTTP_HOST' => 'trivel.org'
    'proxy-nokeepalive' => '1'
    'HTTPS' => 'on'
    'SCRIPT_URI' => 'https://trivel.org/productora/unir'
    'SCRIPT_URL' => '/productora/unir'
    'REDIRECT_STATUS' => '200'
    'REDIRECT_HTTPS' => 'on'
    'REDIRECT_SCRIPT_URI' => 'https://trivel.org/productora/unir'
    'REDIRECT_SCRIPT_URL' => '/productora/unir'
    'FCGI_ROLE' => 'RESPONDER'
    'PHP_SELF' => '/index.php'
    'REQUEST_TIME_FLOAT' => 1677171969.7488
    'REQUEST_TIME' => 1677171969
]


üìñ application
üôÇ 77.231.188.26


== YII2
=== Bugs

==== bs4/ActiveForm
getAttributeLabels called twice: breakpoint en
/home/santilin/devel/yii2base/vendor/yiisoft/yii2-bootstrap4/src/ActiveField.php:553

==== Codeception
Test: CrudOfertaCest. Cuando redirige de update a view, no se borra la aplicaci√≥n y el componente 'view' se queda con _isPageEnded se queda a true

/home/santilin/devel/yii2base/vendor/yiisoft/yii2/base/Controller.php
    public function getView()
    {
        if ($this->_view === null) {
            $this->_view = Yii::$app->getView();
        }

/home/santilin/devel/yii2base/vendor/yiisoft/yii2/base/Application.php
    public function getView()
    {
        return $this->get('view');
    }

/home/santilin/devel/yii2base/vendor/yiisoft/yii2/base/Module.php
	public function get($id, $throwException = true)
    {
        if (!isset($this->module)) {
            return parent::get($id, $throwException);
        }

/home/santilin/devel/yii2base/vendor/yiisoft/yii2/di/ServiceLocator.php
    public function get($id, $throwException = true)
    {
        if (isset($this->_components[$id])) {
            return $this->_components[$id];
        }


/home/santilin/devel/yii2base/vendor/yiisoft/yii2/web/View.php
    private function registerFile($type, $url, $options = [], $key = null)


== TableListView ==
* funci√≥n extractHeaders
* Paginador no sale bien el layout/css. A√±adir el pager como en simplelistview

DateInput => SpanishDateInput. Definir campo date_es

yii2usuario: alert falla cuando se redirige de bs4 a bs3 porque no espera un array aqu√≠: /home/santilin/devel/yii2base/vendor/2amigos/yii2-usuario/src/User/resources/views/shared/_alert.php
Hay acceso a trivel.test/user/2


= Permisos
* Crear Reports.view, etc. (biosegura)

== Adjuntos y subir ficheros
* Opciones
	- tabla de adjuntos.
	- behaviour
	- behaviour con m√∫ltiple
* Fileuploadbehavior saveorigfname true

= Creaci√≥n din√°mica de etiquetas:
https://stackoverflow.com/questions/32731987/adding-new-list-options-refreshing-updated-list-dynamically

== Print y pdf
* CrudController::pdf: Incluir css del m√≥dulo/modelo actual
* Quitar (no definido) al imprimir
* Hacer uso de los model.Agente.report? o los permisos del Param?

== GridView ==
* OneToOne: Grid: no sortable, no filter
* GridView: Report : grupos: opciones para Mostrar encabezado, mostrar pie.
* ¬øQuitar grid-group-head-xxxx de site.css?
* Grid Enlaces en el joinmodels: filtro en el grid por ese valor
* selectViews no funciona con pjax porque es un dropdown. A√±adirlo dentro de un FORM
* Grid: cuando se filtra, poner "Filtrando 1-1 de s"
* Cuando s√≥lo hay una p√°gina, no mostrar [1-3] de 3
* GridView: Ocultar filtro si no hay resultados
* BreadCrumbs: Index: A√±adir el orden o el filtro ("filtrado") ("ordenado por")
* 2 gridviews: https://www.yiiframework.com/doc/guide/2.0/en/output-data-widgets#multiple-gridviews

= Formularios
A√±adir el s√≠mbolo del euro al input de los forms: bs4 input-group
Layout de los botones como el hint default/1col en bs3

= No prioritario
== Models
* Tres tipos campos calculados:
- model_before_save
- model_after_read & __set
- form input change

== Reports
* A√±adir m√°s funciones sobre los campos: a√±o, mes, d√≠a, cuenta, media, m√°ximo, m√≠nimo, etc.

== Administraci√≥n de usuarios
=== 2amigos-usuario
	- A√±adir opci√≥n visible en profile en resources ... _menu.php: yiiparam('user_profile');
	- Actualizar a bootstrap4
	- Arreglar vistas en bootstrap3
	- Customize views form bootstrap4
	- usuarios: grid: etiquetas salen en ingl√©s.

== Web
=== Configuraci√≥n
- Configuraci√≥n fecha: Fija, por usuario
- Configuraci√≥n idioma: Fijo, por usuario
== Anidar RercordViews con un static

=== css
* css: width = maxlength en integers, floats y dates

== Formularios

== Inactivatable date
* Etiquetas seg√∫n g√©nero del campo

== Widgets
* A√±adir layout table recordview
* A√±adir showmore a form layout
* A√±adir inline a form layout


== SearchDropDown
* Si un searchdropdown est√° disabled o readonly no mostrar el campo de b√∫squeda

== TableListView
* Quitar m√°rgenes a pager.
* Centrar verticalmente summary.
* A√±adir css como asset.


== yii2
* Max-length: Tomar lo que se ha definido en la base de datos o capturar la excepci√≥n.
* Radio List: Ver c√≥mo a√±adir el autofocus a cada item.

== 3rd party
* Full-text-search: https://www.sqlite.org/fts3.html#section_8_2
* https://github.com/manuvarkey/kanboard-plugin-telegram
* html-to-rtf y .editorconfig https://github.com/github-grabaz/html-rtf-converter/blob/master/.editorconfig
* https://github.com/pavlm/yii2-stats-widget Time Stats widget
* Modelos: Estudiar softdeletes y lock. Faltan los behaviors
* Formulario de settings: file:///home/santilin/devel/yii2base/yii2-docs/guide-input-tabular-input.html
* https://phpstan.org/user-guide/getting-started
* Investigar estos widgets:
- https://www.yiiframework.com/extension/yii2-sortable-behavior
- https://www.yiiframework.com/extension/yii2-poll-widget
- https://github.com/jonmiles/bootstrap-treeview
* Optimizacion sqlite3
https://stackoverflow.com/questions/1711631/improve-insert-per-second-performance-of-sqlite

